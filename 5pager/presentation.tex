%-------------------------------------------------------------------------------
%	SECTION TITLE
%-------------------------------------------------------------------------------

\cvsection{Presentations}


\DTLloaddb[]{presentations}{cv/presentations.csv}

\DTLloaddb[]{llmworkshops}{cv/llm-workshops.csv}
\def\carpentries{0}
\def\longpres{0}
\def\invitedpres{0}
\def\campuspres{0}
\def\conferencepres{0}
\def\totalpres{0}
\def\invitedllm{0}
\def\organizedcampusllm{0}
\def\llmworkshops{0}



\DTLsumcolumn{presentations}{Carpentries}{\carpentries}

\cvsubsection{Summary}



\DTLforeach{presentations}{%
%Status Carpentries
\status=Status}{%
\DTLifeq{\status}{Presentation}{%
\DTLgadd{\invitedpres}{1}{\invitedpres}%
}{}%
\DTLifeq{\status}{Workshop}{%
\DTLgadd{\longpres}{1}{\longpres}%
}{}%
\DTLifeq{\status}{Campus}{%
\DTLgadd{\campuspres}{1}{\campuspres}%
}{}%
\DTLifeq{\status}{Conference}{%
\DTLgadd{\conferencepres}{1}{\conferencepres}%
}{}%
%\dtlappendentrytocurrentrow{Presentation}{\presstatus}%
%\DTLgadd{\campuspres}{\DTLifeq{\status}{Campus}{1}{0}}{\campuspres}%
%\DTLgadd{\conferencepres}{\DTLifeq{\status}{Conference}{1}{0}}{\conferencepres}%
}
\DTLsavelastrowcount{\totalpres}


\DTLforeach{llmworkshops}{%
\status=Status}{%
\DTLifeq{\status}{Invited}{%
\DTLgadd{\invitedllm}{1}{\invitedllm}%
}{}%
\DTLifeq{\status}{Organised}{%
\DTLgadd{\organizedcampusllm}{1}{\organizedcampusllm}%
}{}%
\DTLifeq{\status}{Campus}{%
\DTLgadd{\organizedcampusllm}{1}{\organizedcampusllm}%
}{}%
\DTLgadd{\totalpres}{1}{\totalpres}%
}


\DTLsumcolumn{presentations}{Carpentries}{\carpentries}



\begin{cvhonors}
\cvhonor{Invited Workshops on Generative AI and and LLM policy}{}{2023 -- Present}{\invitedllm{}}
\cvhonor{Invited presentations}{}{2019 -- Present}{\invitedpres{}}
\cvhonor{Selected on-campus presentations}{}{2016 -- Present}{\campuspres{}}
\cvhonor{Peer-reviewed conference presentations}{}{2006 -- Present}{\conferencepres{}}
\cvhonor{Organised and Campus Workshops on Generative AI}{}{2023 -- Present}{\organizedcampusllm{}}
\cvhonor{Total presentations}{}{2006 -- Present}{\totalpres{}}
\end{cvhonors}


%\cvsubsection{Long Workshops}
\cvsubsection{LLM Workshops}

\small
\DTLforeach{llmworkshops}{%
\date=Date,\location=Location Blurb,\topics=Topics,\audience=Audience,\status=Status}{%
\textbf{\date} \textit{\location}: \topics (\audience) [\status] \\
}

\normalsize
\begin{cventries}
\DTLforeach[\equal{\acadstatus}{Workshop}]{presentations}{%
%ProjectName	Date	Role	Location	Description1	Description2    
\projectname=ProjectName,%
\date=Date,%
\role=Role,%
\location=Location,%
\descone=Description1,%
\desctwo=Description2,%
\acadstatus=Status}%
{%
 \cventry
    {\role} % subhead
    {\projectname} % head
    {\date} % green
    {\location} % flushright grey
    {%
    \DTLifnullorempty
        {\descone}
        {}
        {\begin{cvitems}
        \item \descone%
        \DTLifnullorempty
            {\desctwo}
            {}
            {\item \desctwo}
        \end{cvitems}
        }
    }
}
\end{cventries}

\newcounter{presentcounter}

\cvsubsection{Recent Invited Presentations}

\begin{cventries}
\DTLforeach[\equal{\acadstatus}{Presentation}]{presentations}{%
%ProjectName	Date	Role	Location	Description1	Description2    
\projectname=ProjectName,%
\date=Date,%
\role=Role,%
\location=Location,%
\descone=Description1,%
\desctwo=Description2,%
\acadstatus=Status}%
{%
\stepcounter{presentcounter}
\ifnum\value{presentcounter}>3\relax
  \dtlbreak
\fi
 \cventry
    {\role} % subhead
    {\projectname} % head
    {\date} % green
    {\location} % flushright grey
    {%
    \DTLifnullorempty
        {\descone}
        {}
        {\begin{cvitems}
        \item \descone%
        \DTLifnullorempty
            {\desctwo}
            {}
            {\item \desctwo}
        \end{cvitems}
        }
    }
}
\end{cventries}


% \cvsubsection{Campus Presentations}


% \begin{cventries}
% \DTLforeach[\equal{\acadstatus}{Campus}]{presentations}{%
% %ProjectName	Date	Role	Location	Description1	Description2    
% \projectname=ProjectName,%
% \date=Date,%
% \role=Role,%
% \location=Location,%
% \descone=Description1,%
% \desctwo=Description2,%
% \acadstatus=Status}%
% {%
%  \cventry
%     {\role} % subhead
%     {\projectname} % head
%     {\date} % green
%     {\location} % flushright grey
%     {%
%     \DTLifnullorempty
%         {\descone}
%         {}
%         {\begin{cvitems}
%         \item \descone%
%         \DTLifnullorempty
%             {\desctwo}
%             {}
%             {\item \desctwo}
%         \end{cvitems}
%         }
%     }
% }
% \end{cventries}

\newcounter{confcounter}

\cvsubsection{Recent Conference Presentations}


\begin{cventries}
\DTLforeach[\equal{\acadstatus}{Conference}]{presentations}{%
%ProjectName	Date	Role	Location	Description1	Description2    
\projectname=ProjectName,%
\date=Date,%
\role=Role,%
\location=Location,%
\descone=Description1,%
\desctwo=Description2,%
\acadstatus=Status}%
{%
\stepcounter{confcounter}
\ifnum\value{confcounter}>2\relax
  \dtlbreak
\fi
 \cventry
    {\role} % subhead
    {\projectname} % head
    {\date} % green
    {\location} % flushright grey
    {%
    \DTLifnullorempty
        {\descone}
        {}
        {\begin{cvitems}
        \item \descone%
        \DTLifnullorempty
            {\desctwo}
            {}
            {\item \desctwo}
        \end{cvitems}
        }
    }
}
\end{cventries}
